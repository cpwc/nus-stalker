<% include head %>
<div class="text-center" style="margin-top:50px">
    <img src="img/logo.png">
    <% for (var i=0; i<messages.length; i++) { %>
        <div class="alert alert-danger alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <%= messages[i] %>
        </div>
    <% } %>
    <form action="/search" method="get">
        <div class="form-group">
            <div class="input-group col-sm-8 col-sm-offset-2">
                <input type="text" class="typeahead form-control" name="q" placeholder="Name to search for">
                <span class="input-group-btn">
                    <input type="submit" class="btn btn-default" value="Search">
                </span>
            </div>
        </div>
    </form>
    <p class="muted">"I solemnly swear I am up to no good."</p>
</div>
<script>
$(function(){
    var names = new Dataset({
        remote: '/suggest?q=%QUERY'
    }).initialize();
    
    $('.typeahead').typeahead({
        sections: [{
            highlight: true,
            name: 'namesSection',
            source: names,
            limit: 10,
        }]                                                               
    })
    .on('typeahead:opened',function() {
        $('.tt-dropdown-menu').css('width',$('.typeahead').outerWidth() + 'px');
    })
    .on('typeahead:selected', function(obj, datum, name) {
        $('form').submit();
    })
});
</script>
<% include foot %>